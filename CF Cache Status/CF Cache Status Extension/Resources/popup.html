<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cache Status</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="container">
    <div class="status-card">
      <div id="status-badge">--</div>
      <div id="status-label">Loading...</div>
    </div>

    <div id="no-data" class="hidden">
      <p>No CDN cache data available for this page.</p>
    </div>

    <div id="cache-section" class="section hidden">
      <div class="section-header">Cache</div>
      <div class="section-card" id="cache-rows"></div>
    </div>

    <div id="response-section" class="section hidden">
      <div class="section-header">Response</div>
      <div class="section-card" id="response-rows"></div>
    </div>

    <div id="performance-section" class="section hidden">
      <div class="section-header">Performance</div>
      <div class="section-card" id="performance-rows"></div>
    </div>

    <div id="url-container" class="hidden">
      <span id="page-url"></span>
    </div>

    <div id="cloudfront-info" class="section hidden">
      <div class="section-header">Note</div>
      <div class="info-card">
        <p class="info-note">A "MISS" at the edge doesn't always mean the request reached your origin. CloudFront may serve from <a href="https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/origin-shield.html" target="_blank">Origin Shield</a> (intermediate cache) but still report MISS from the edge's perspective.</p>
      </div>
    </div>

    <div id="fastly-info" class="section hidden">
      <div class="section-header">Note</div>
      <div class="info-card">
        <p class="info-note">Multiple values in X-Cache show cache status at each layer in Fastly's <a href="https://www.fastly.com/documentation/guides/concepts/edge-state/cache/cache-freshness/" target="_blank">tiered architecture</a>:</p>
        <pre class="info-diagram">X-Cache: MISS, HIT, MISS
         │     │    │
         │     │    └── Edge POP (closest to you)
         │     └─────── Shield POP (intermediate cache)
         └───────────── Origin (your server)</pre>
      </div>
    </div>
  </div>
  <script src="popup.js"></script>
</body>
</html>
