<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="color-scheme" content="light dark">
  <title>Cache Status</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="app-container">
    
    <!-- Hero Status Section -->
    <header class="hero-section" id="hero-section">
      <div class="hero-icon-container" id="hero-icon">
        <!-- Icon injected by JS -->
      </div>
      <div class="hero-content">
        <h1 id="status-title" class="status-title">Checking...</h1>
        <div id="status-subtitle" class="status-subtitle">Waiting for headers</div>
      </div>
    </header>

    <div class="divider"></div>

    <!-- Primary Metrics Grid -->
    <section id="metrics-section" class="section hidden">
      <div class="section-label">Summary</div>
      <div class="metrics-grid" id="metrics-grid">
        <!-- Grid items injected by JS -->
      </div>
    </section>

    <!-- Headers List -->
    <section id="headers-section" class="section hidden">
      <div class="section-label">Headers</div>
      <div class="details-list" id="headers-list">
        <!-- Header rows injected by JS -->
      </div>
    </section>

    <!-- Detailed Performance Breakdown (Moved Below Headers) -->
    <section id="perf-section" class="section hidden">
      <div class="section-label">Timing</div>
      <div class="details-list" id="perf-list">
        <!-- Performance rows injected by JS -->
      </div>
    </section>

    <!-- Info / Help Messages -->
    <section id="info-section" class="section hidden">
      <div class="section-label">Note</div>
      
      <!-- CloudFront Origin Shield Note -->
      <div id="info-cloudfront" class="info-banner hidden">
        A "MISS" at the edge doesn't always mean the request reached your origin. CloudFront may serve from <a href="https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/origin-shield.html" target="_blank">Origin Shield</a> (intermediate cache) but still report MISS from the edge's perspective.
      </div>

      <!-- Fastly Tiered Cache Note -->
      <div id="info-fastly" class="info-banner hidden">
        Multiple values in X-Cache show cache status at each layer in Fastly's <a href="https://www.fastly.com/documentation/guides/concepts/edge-state/cache/cache-freshness/" target="_blank">tiered architecture</a>:
        <div class="info-diagram">X-Cache: MISS, HIT, MISS
         │     │    │
         │     │    └── Edge POP
         │     └─────── Shield POP
         └───────────── Origin</div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="footer hidden" id="footer">
      <div class="url-truncate" id="page-url"></div>
    </footer>

  </div>

  <script src="constants.js"></script>
  <script src="popup.js"></script>
</body>
</html>
